Blocking and non-blocking example